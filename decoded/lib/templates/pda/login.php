<?php 
if( !defined("ADMIN_LOADED") ) 
{
    exit();
}

$languages = Lang::getalllanguages();
$defaultLanguage = Config::get("DefaultLanguage");
$templates = Template::getalltemplates();
$defaultTemplate = Config::get("DefaultTemplate");
echo "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\r\n\t\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\r\n<head>\r\n\t\r\n\t<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"/>\r\n\r\n\t\r\n</head>\r\n<body onload=\"document.getElementById('AuthPass').focus()\">\r\n";
if( Errors::haserrors() ) 
{
    echo "\t<div style=\"color:red;\">\r\n\t\t";
    foreach( Errors::$errors as $error ) 
    {
        echo "\t\t\t<p>";
        echo $error;
        echo "</p>\r\n\t\t";
    }
    echo "\t</div>\r\n";
}

echo "\r\n<form action=\"";
echo Config::get("AdminScriptName");
echo "\" method=\"post\">\r\n\t";
echo Lang::get("FormPassLabel");
echo ": <input type=\"password\" name=\"AuthPass\" id=\"AuthPass\" value=\"\"/><br/>\r\n\t";
echo Lang::get("FormLangLabel");
echo ": <select name=\"AuthLanguage\">\r\n\t\t";
foreach( $languages as $code => $languageTitle ) 
{
    echo "\t\t\t<option value=\"";
    echo $code;
    echo "\" ";
    echo ($code == $defaultLanguage ? "selected=\"selected\"" : "");
    echo ">";
    echo $languageTitle;
    echo "</option>\r\n\t\t";
}
echo "\t\r\n\t</select><br/>\r\n\t";
echo Lang::get("FormTemplateLabel");
echo ": <select name=\"AuthTemplate\">\r\n\t\t";
foreach( $templates as $template ) 
{
    echo "\t\t\t<option value=\"";
    echo $template;
    echo "\" ";
    echo ($template == $defaultTemplate ? "selected=\"selected\"" : "");
    echo ">";
    echo $template;
    echo "</option>\r\n\t\t";
}
echo "\t</select><br/>\r\n\t<input type=\"submit\" value=\"";
echo Lang::get("FormLoginButton");
echo "\"/>\r\n</form>\r\n</body>\r\n</html>";

