<?php 
if( !defined("ADMIN_LOADED") ) 
{
    exit();
}

define("PAGE", "prefs");
$imgPath = Config::get("AdminScriptName") . "?" . Config::get("MainParamName") . "=file&type=img&file=";
$languages = Lang::getalllanguages();
$defaultLanguage = Config::get("DefaultLanguage", "en");
$templates = Template::getalltemplates();
$defaultTemplate = Config::get("DefaultTemplate", "default");
$threads = db::select("select ID, Title from Threads where Deleted = 0 order by Title asc");
echo "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\r\n\t\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\r\n<head>\r\n\t<title>";
echo Lang::get("MenuConfigButton");
echo "</title>\r\n\t<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"/>\r\n\t<link rel=\"stylesheet\" href=\"";
echo Config::get("AdminScriptName");
echo "?";
echo Config::get("MainParamName");
echo "=file&type=css&file=main.css\" type=\"text/css\" media=\"screen\" />\r\n</head>\r\n<body>\r\n\t<div class=\"title\">\r\n\t\t<ul>\r\n\t\t\t<li class=\"logo\"><a href=\"";
echo Config::get("AdminScriptName");
echo "\"><img src=\"";
echo $imgPath;
echo "logo.gif\" width=\"15px\" height=\"15px\"/></a></li>\r\n\t\t\t<li><a href=\"";
echo Config::get("AdminScriptName");
echo "?";
echo Config::get("MainParamName");
echo "=threads\">";
echo Lang::get("MenuThreadsButton");
echo "</a></li>\r\n\t\t\t<li><a href=\"";
echo Config::get("AdminScriptName");
echo "?";
echo Config::get("MainParamName");
echo "=files\">";
echo Lang::get("MenuFilesButton");
echo "</a></li>\r\n\t\t\t<li><a href=\"";
echo Config::get("AdminScriptName");
echo "?";
echo Config::get("MainParamName");
echo "=secur\">";
echo Lang::get("MenuSecurityButton");
echo "</a></li>\r\n\t\t</ul>\r\n\t\t<div class=\"controls\">\r\n\t\t\t<ul>\r\n\t\t\t\t<li class=\"edit\"><a href=\"";
echo Config::get("AdminScriptName");
echo "?";
echo Config::get("MainParamName");
echo "=prefs\"><img src=\"";
echo $imgPath;
echo "edit.gif\" width=\"7px\" height=\"7px\"/></a></li>\r\n\t\t\t\t<li class=\"logout\"><a href=\"";
echo Config::get("AdminScriptName");
echo "?";
echo Config::get("MainParamName");
echo "=logout\"><img src=\"";
echo $imgPath;
echo "logout.gif\" width=\"6px\" height=\"10px\"/></a></li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t\t<div style=\"clear:both;\"></div>\r\n\t</div>\r\n\t\r\n\t<form action=\"";
echo Config::get("AdminScriptName");
echo "?";
echo Config::get("MainParamName");
echo "=prefsSave\" method=\"post\">\r\n\t\t<div class=\"prefTitle first\">";
echo Lang::get("ChangeFilenameTitle");
echo ":</div>\r\n\t\t<div class=\"prefContent\">\r\n\t\t\t";
echo Lang::get("MainScript");
echo ":<br/>\r\n\t\t\t<input type=\"text\" name=\"MainRename\" value=\"";
echo str_replace(".php", "", Config::get("AdminScriptName"));
echo "\"/>\r\n\t\t\t";
echo Lang::get("PublicScript");
echo ":<br/>\r\n\t\t\t<input type=\"text\" name=\"StatRename\" value=\"";
echo Config::get("StatFileName");
echo "\"/>\r\n\t\t\t";
echo Lang::get("IncomingScript");
echo ":<br/>\r\n\t\t\t<input type=\"text\" name=\"FrameRename\" value=\"";
echo Config::get("MainFileName");
echo "\"/>\r\n\t\t\t";
echo Lang::get("StatParamName");
echo ":<br/>\r\n\t\t\t<input type=\"text\" name=\"StatParamName\" value=\"";
echo Config::get("StatParamName");
echo "\"/>\r\n\t\t</div>\r\n\t\t<div class=\"prefTitle\">";
echo Lang::get("ChangePassword");
echo ":</div>\r\n\t\t<div class=\"prefContent\">\r\n\t\t\t<div style=\"float:left;width:50%;\">\r\n\t\t\t\t";
echo Lang::get("OldPassword");
echo ":<br/>\r\n\t\t\t\t<input type=\"password\" name=\"OldPassword\"/>\r\n\t\t\t</div>\r\n\t\t\t<div style=\"float:left;width:50%;\">\r\n\t\t\t\t";
echo Lang::get("NewPassword");
echo ":<br/>\r\n\t\t\t\t<input type=\"password\" name=\"NewPassword1\"/><br/>\r\n\t\t\t\t";
echo Lang::get("ConfirmPassword");
echo ":<br/>\r\n\t\t\t\t<input type=\"password\" name=\"NewPassword2\"/>\r\n\t\t\t</div>\r\n\t\t\t<div style=\"clear:both;\"></div>\r\n\t\t</div>\r\n\t\t<div class=\"prefTitle\">";
echo Lang::get("Interface");
echo ":</div>\r\n\t\t<div class=\"prefContent\">\r\n\t\t\t<div style=\"float:left;width:50%;\">\r\n\t\t\t\t";
echo Lang::get("Language");
echo ":<br/>\r\n\t\t\t\t<select name=\"DefaultLanguage\">\r\n\t\t\t\t\t";
foreach( $languages as $code => $language ) 
{
    echo "\t\t\t\t\t\t<option value=\"";
    echo $code;
    echo "\" ";
    echo ($code == $defaultLanguage ? "selected=\"selected\"" : "");
    echo ">";
    echo $language;
    echo "</option>\r\n\t\t\t\t\t";
}
echo "\t\t\t\t</select>\r\n\t\t\t</div>\r\n\t\t\t<div style=\"float:left;width:50%;\">\r\n\t\t\t\t";
echo Lang::get("Template");
echo ":<br/>\r\n\t\t\t\t<select name=\"DefaultTemplate\">\r\n\t\t\t\t\t";
foreach( $templates as $template ) 
{
    echo "\t\t\t\t\t\t<option value=\"";
    echo $template;
    echo "\" ";
    echo ($template == $defaultTemplate ? "selected=\"selected\"" : "");
    echo ">";
    echo $template;
    echo "</option>\r\n\t\t\t\t\t";
}
echo "\t\t\t\t</select>\r\n\t\t\t</div>\r\n\t\t\t<div style=\"clear:both;\"></div>\r\n\t\t</div>\r\n\t\t<div class=\"prefTitle\">";
echo Lang::get("VirTest");
echo ":</div>\r\n\t\t<div class=\"prefContent\">\r\n\t\t\t<div style=\"float:left;width:50%;\">\r\n\t\t\t\t";
echo Lang::get("VirLogin");
echo ":<br/>\r\n\t\t\t\t<input type=\"text\" name=\"virtestLogin\" value=\"";
echo Config::get("virtestLogin");
echo "\"/>\r\n\t\t\t</div>\r\n\t\t\t<div style=\"float:left;width:50%;\">\r\n\t\t\t\t";
echo Lang::get("VirPass");
echo ":<br/>\r\n\t\t\t\t<input type=\"text\" name=\"virtestPass\" value=\"";
echo Config::get("virtestPass");
echo "\"/>\r\n\t\t\t</div>\r\n\t\t\t<div style=\"clear:both;\"></div>\r\n\t\t</div>\r\n\t\t<div class=\"prefTitle\">";
echo Lang::get("Limits");
echo ":</div>\r\n\t\t<div class=\"prefContent\">\r\n\t\t\t<div style=\"float:left;width:50%;\">\r\n\t\t\t\t";
echo Lang::get("ConfigBrowserLimitLabel");
echo ":<br/>\r\n\t\t\t\t<input type=\"text\" name=\"MaxBrowsersLimit\" value=\"";
echo Config::get("MaxBrowsersLimit");
echo "\"/><br/>\r\n\t\t\t\t";
echo Lang::get("ConfigContriesLimitLabel");
echo ":<br/>\r\n\t\t\t\t<input type=\"text\" name=\"MaxCountriesLimit\" value=\"";
echo Config::get("MaxCountriesLimit");
echo "\"/>\r\n\t\t\t</div>\r\n\t\t\t<div style=\"float:left;width:50%;\">\r\n\t\t\t\t";
echo Lang::get("ConfigOSLimitLabel");
echo ":<br/>\r\n\t\t\t\t<input type=\"text\" name=\"MaxOSLimit\" value=\"";
echo Config::get("MaxOSLimit");
echo "\"/><br/>\r\n\t\t\t\t";
echo Lang::get("ConfigReferersLimitLabel");
echo ":<br/>\r\n\t\t\t\t<input type=\"text\" name=\"MaxReferersLimit\" value=\"";
echo Config::get("MaxReferersLimit");
echo "\"/>\r\n\t\t\t</div>\r\n\t\t\t<div style=\"clear:both;\"></div>\r\n\t\t</div>\r\n\t\t<br/>\r\n\t\t<center><input type=\"submit\" value=\"";
echo Lang::get("FormApplyButton");
echo "\"/></center>\r\n\t</form>\r\n</body>\r\n</html>";

