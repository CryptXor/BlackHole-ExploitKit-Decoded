<?php 
define("LANG_VARIABLE", "Lang");

class Lang
{
    public static $dic = array( "en" => array( "FormPassLabel" => "Pass", "FormLangLabel" => "Lang", "FormTemplateLabel" => "Template", "FormApplyButton" => "Apply", "FormLoginButton" => "Login", "FormLogoutButton" => "Logout", "MenuMainButton" => "Statistics", "MenuFilesButton" => "Files", "MenuThreadsButton" => "Threads", "MenuSecurityButton" => "Security", "MenuConfigButton" => "Preferences", "WrongUserName" => "Wrong password", "CheckAll" => "Check all", "UncheckAll" => "Uncheck all", "Seconds" => "sec.", "Minute" => "min.", "Minutes" => "min.", "StartDate" => "Start date", "EndDate" => "End date", "AutoupdateInterval" => "Autoupdate interval", "ConfigAdminPassLabel" => "Admin password", "ConfigDefaultLangLabel" => "Default admin panel language", "ConfigDefaultTemplateLabel" => "Default admin panel template", "ConfigAjaxAutoreloadLabel" => "Ajax autoreload interval", "ConfigSavedLabel" => "Preferences has been saved", "ConfigBrowserLimitLabel" => "Browser limit", "ConfigOSLimitLabel" => "OS limit", "ConfigContriesLimitLabel" => "Contries limit", "ConfigExploitsLimitLabel" => "Exploits limit", "ConfigReferersLimitLabel" => "Referers limit", "ConfigShowReferersLabel" => "Show referers", "ConfigMainRenameLabel" => "Main script filename", "ConfigSubmitButton" => "Save", "ThreadStat" => "Thread statistic", "RuleStat" => "rule", "PublicLink" => "Public link", "From" => "from", "FilesList" => "Files list", "Date" => "Date", "Size" => "Size", "StatisticsBrowsersLabel" => "Browsers", "StatisticsOSLabel" => "OS", "StatisticsCountriesLabel" => "Countries", "StatisticsExploitsLabel" => "Exploits", "StatisticsThreadsLabel" => "Threads", "StatisticsRedirectsLabel" => "Redirects", "StatisticsFilesLabel" => "Files", "StatisticsReferersLabel" => "Referers", "StatisticsHostsLabel" => "Hosts", "PercentTotalLabel" => "%% total", "StatisticsHitsLabel" => "Hits", "StatisticsLoadsLabel" => "Loads", "StatisticsPercentLabel" => "%%", "StatisticsOtherLabel" => "Other", "Hited" => "hited", "Hosts" => "hosts", "Loads" => "loads", "LoadsTotal" => "loads", "Statistic" => "Statistic", "TotalInfo" => "Total info", "TodayInfo" => "Today info", "PeriodInfo" => "Selected perion info", "About" => "About system", "Terms" => "Terms of use", "Credits" => "Credits", "AddThreadLabel" => "Add thread", "AddRuleLabel" => "Add rule", "AddFileLabel" => "Add file", "AddWidgetLabel" => "Add widget", "CloseAskLabel" => "Are you sure?", "CloseDeleteLabel" => "Delete", "CloseCancelLabel" => "Cancel", "allCountries" => "All countries", "widgetTitle" => "Widget title", "CountriesFilter" => "Countries filter disabled", "BrowsersFilter" => "Browsers filter disabled", "OSFilter" => "OS filter disabled", "ExploitsFilter" => "Exploits disabled", "FilesFilter" => "Files disabled", "Next" => "Next", "NotAllSelected" => "Not all filters selected", "Back" => "Back", "VirusCheck" => "Virus check", "LastCheck" => "Last check", "FileUpload" => "File upload", "LoadsLimit" => "Limit", "DefComment" => "File comment", "ReplaceFile" => "Replace file", "FileNull" => "Set current to zero", "BlackList" => "Black list", "IPMask" => "Use * for mask", "SecurImport" => "Import from file", "SecurExport" => "Export to file", "ToRedirects" => "Change to redirects", "ToExploits" => "Change to exploits", "ChangeFilenameTitle" => "Change filename", "ChangeFilename" => "Change filename", "MainScript" => "Main script filename", "PublicScript" => "Public statistic script filename", "IncomingScript" => "Incoming script filename", "DownloadScript" => "Download script filename", "Samba" => "Path to samba", "FilenameChanged" => "Filename changed", "SelectFile" => "Select file", "UploadFile" => "Upload file", "InputLimit" => "Input limit", "ChangePassword" => "Change password", "OldPassword" => "Old password", "NewPassword" => "New password", "ConfirmPassword" => "Confirm password", "PasswordChanged" => "Password changed", "ChangeInterval" => "Change interval", "Change" => "Change", "IntervalChanged" => "Interval changed", "Interface" => "Interface", "Language" => "Language", "Template" => "Template", "Limits" => "Limits", "LimitsChanged" => "Limits changed", "DeleteStatistics" => "Delete statistics", "DeleteAll" => "Delete all", "DeleteConfirm" => "You can`t restore data after delete, be patient", "DeleteConfirmText" => "Are you sure want to delete all?", "DeleteThreadText" => "Are you sure want to delete thread data?", "Thread" => "Thread", "DeleteThread" => "Delete data", "ThreadDeleted" => "Thread data deleted", "ForHosts" => "Not unique traffic", "ForHits" => "Unique traffic", "ForAll" => "All traffic", "CreateThread" => "Create thread", "GlobalStatistic" => "Global system statistics", "RuleTitle" => "Rule", "StatisticsTrafficLabel" => "Traffic", "Name" => "Name", "Antivirus" => "Antivirus", "LastUpdate" => "Last update", "ResultFileScan" => "Result", "AVService" => "Antivirus service", "VirTest" => "Antivirus check", "VirLogin" => "Login", "VirPass" => "Password", "VirChanged" => "Login/password changed", "FileReceived" => "File <b>%s</b> received on <b>%s</b>", "FileScanOften" => "You can`t scan that often", "StatParamName" => "Thread param name", "Changed" => "Changed", "WrongLogin" => "Wrong login/password", "ConfigReferersShowLabel" => "Keep referers records", "RedirectsNotSelected" => "Redirects wasn`t selected", "InputTitle" => "Input title", "UsedFile" => "This file used in threads. Can`t delete", "InvalidUrl" => "Not valid url", "DuplicateUrl" => "Dublicate or empty url", "InvalidIP" => "IP isn`t valid", "DublicateIP" => "Dublicate IP", "DataDeleted" => "Data deleted", "ScanError" => "Scan error" ), "ru" => array( "FormPassLabel" => "Пароль", "FormLangLabel" => "Язык", "FormTemplateLabel" => "Шаблон", "FormApplyButton" => "Применить", "FormLoginButton" => "Войти", "FormLogoutButton" => "Выйти", "MenuMainButton" => "Статистика", "MenuFilesButton" => "Файлы", "MenuThreadsButton" => "Потоки", "MenuSecurityButton" => "Безопасность", "MenuConfigButton" => "Настройки", "WrongUserName" => "Неверный пароль", "CheckAll" => "Выбрать все", "UncheckAll" => "Снять все", "Seconds" => "сек.", "Minute" => "мин.", "Minutes" => "мин.", "StartDate" => "Начало", "EndDate" => "Конец", "AutoupdateInterval" => "Автообновление", "ConfigAdminPassLabel" => "Пароль", "ConfigDefaultLangLabel" => "Default admin panel language", "ConfigDefaultTemplateLabel" => "Default admin panel template", "ConfigAjaxAutoreloadLabel" => "Ajax autoreload interval", "ConfigSavedLabel" => "Preferences has been saved", "ConfigBrowserLimitLabel" => "Лимит браузеров", "ConfigOSLimitLabel" => "Лимит ОС", "ConfigContriesLimitLabel" => "Лимит стран", "ConfigExploitsLimitLabel" => "Лимит эксплоитов", "ConfigReferersLimitLabel" => "Лимит рефереров", "ConfigShowReferersLabel" => "Показывать рефереров", "ConfigMainRenameLabel" => "Имя файла главного скрипта", "ConfigSubmitButton" => "Сохранить", "ThreadStat" => "Статистика потока", "RuleStat" => "правила", "PublicLink" => "Публичная ссылка", "From" => "из", "FilesList" => "Список файлов", "Date" => "Дата", "Size" => "Размер", "StatisticsBrowsersLabel" => "Браузеры", "StatisticsOSLabel" => "ОС", "StatisticsCountriesLabel" => "Страны", "StatisticsExploitsLabel" => "Эксплоиты", "StatisticsThreadsLabel" => "Потоки", "StatisticsRedirectsLabel" => "Редиректы", "StatisticsFilesLabel" => "Файлы", "StatisticsReferersLabel" => "Рефереры", "StatisticsHostsLabel" => "Хосты", "PercentTotalLabel" => "%% всего", "StatisticsHitsLabel" => "Хиты", "StatisticsLoadsLabel" => "Загрузки", "StatisticsPercentLabel" => "%%", "StatisticsOtherLabel" => "Другое", "Hited" => "хиты", "Hosts" => "хосты", "Loads" => "загрузки", "LoadsTotal" => "пробив", "Statistic" => "Статистика", "TotalInfo" => "За весь период", "TodayInfo" => "За сегодня", "PeriodInfo" => "За выбранный период", "AddThreadLabel" => "Создать поток", "AddRuleLabel" => "Новое правило", "AddFileLabel" => "Новый файл", "AddWidgetLabel" => "Создать виджет", "CloseAskLabel" => "Вы уверены?", "CloseDeleteLabel" => "Удалить", "CloseCancelLabel" => "Отменить", "allCountries" => "Все страны", "widgetTitle" => "Заголовок виджета", "CountriesFilter" => "Фильтр по странам отключен", "BrowsersFilter" => "Фильтр по браузерам отключен", "OSFilter" => "Фильтр по ОС отключен", "ExploitsFilter" => "Эксплоиты отключены", "FilesFilter" => "Файлы отключены", "Next" => "Далее", "NotAllSelected" => "Не все фильтры выбраны", "Back" => "Назад", "VirusCheck" => "Проверка на вирусы", "LastCheck" => "Последняя проверка", "FileUpload" => "Загрузка файла", "LoadsLimit" => "Лимит", "DefComment" => "Комментарий к файлу", "ReplaceFile" => "Заменить файл", "FileNull" => "Обнулить текущее", "BlackList" => "Черный список", "IPMask" => "Используйте * для маски", "SecurImport" => "Импорт из файла", "SecurExport" => "Экспорт в файл", "ToRedirects" => "Изменить на редиректы", "ToExploits" => "Изменить на эксплойты", "ChangeFilenameTitle" => "Изменение имени скрипта", "ChangeFilename" => "Изменить", "MainScript" => "Имя главного скрипта", "PublicScript" => "Имя скрипта публичной статистики", "IncomingScript" => "Имя скрипта входящего траффика", "DownloadScript" => "Имя скрипта для скачивания файла", "Samba" => "Путь к самбе", "FilenameChanged" => "Имя изменено", "SelectFile" => "Не выбран файл", "UploadFile" => "Загрузить файл", "InputLimit" => "Введите лимит", "ChangePassword" => "Изменить пароль", "OldPassword" => "Старый пароль", "NewPassword" => "Новый пароль", "ConfirmPassword" => "Подтвердите пароль", "PasswordChanged" => "Пароль изменен", "ChangeInterval" => "Изменить интервал обновления", "Change" => "Изменить", "IntervalChanged" => "Интервал изменен", "Interface" => "Интерфейс", "Language" => "Язык", "Template" => "Шаблон", "Limits" => "Лимиты", "LimitsChanged" => "Лимиты изменены", "DeleteStatistics" => "Удаление статистики", "DeleteAll" => "Удалить все", "DeleteConfirm" => "Вы не сможете восстановить данные после удаления, будьте внимательны", "DeleteConfirmText" => "Вы уверены, что хотите удалить все?", "DeleteThreadText" => "Вы уверены, что хотите обнулить статистику потока?", "Thread" => "Поток", "DeleteThread" => "Удалить", "ThreadDeleted" => "Статистика потока обнулена", "ForHosts" => "Неуникальный трафик", "ForHits" => "Уникальный трафик", "ForAll" => "Весь трафик", "CreateThread" => "Создание потока", "GlobalStatistic" => "Общая статистика системы", "RuleTitle" => "Правило", "StatisticsTrafficLabel" => "Трафик", "Name" => "Имя", "Antivirus" => "Антивирус", "LastUpdate" => "Обновление", "ResultFileScan" => "Результат", "AVService" => "Сервис", "VirTest" => "Антивирусная проверка", "VirLogin" => "Логин", "VirPass" => "Пароль", "VirChanged" => "Логин/пароль изменены", "FileReceived" => "Файл <b>%s</b> получен <b>%s</b>", "FileScanOften" => "Нельзя сканировать так часто", "StatParamName" => "Имя параметра потока", "Changed" => "Изменено", "WrongLogin" => "Неверный логин/пароль", "ConfigReferersShowLabel" => "Вести учет рефереров", "RedirectsNotSelected" => "Редиректы не были выбраны", "InputTitle" => "Не введен заголовок", "UsedFile" => "Данный файл используется в потоках", "InvalidUrl" => "Неверный урл", "DuplicateUrl" => "Дублированный или пустой урл", "InvalidIP" => "Неверный IP", "DublicateIP" => "Дублированный IP", "DataDeleted" => "Данные удалены", "ScanError" => "Ошибка сканирования" ) );
    public static $languageTitles = array( "en" => "English", "ru" => "Русский" );

    public static function isSetLanguage()
    {
        return isset($_SESSION[LANG_VARIABLE]);
    }

    public static function getCurLang()
    {
        return (isset($_SESSION[LANG_VARIABLE]) ? $_SESSION[LANG_VARIABLE] : Config::get("DefaultLanguage"));
    }

    public static function setCurLang($curLang = "en")
    {
        $_SESSION[LANG_VARIABLE] = $curLang;
    }

    public static function setCurLangIfNotSet($curLang = "en")
    {
        if( !self::issetlanguage() ) 
        {
            self::setcurlang($curLang);
        }

    }

    public static function getAllLanguages()
    {
        return self::$languageTitles;
    }

    public static function get($name)
    {
        $curLang = self::getcurlang();
        if( !isset(self::$dic[$curLang]) || !isset(self::$dic[$curLang][$name]) ) 
        {
            if( isset(self::$dic[Config::get("DefaultLanguage")][$name]) ) 
            {
                return self::$dic[Config::get("DefaultLanguage")][$name];
            }

            return "";
        }

        $text = self::$dic[$curLang][$name];
        $args = func_get_args();
        array_shift($args);
        return vsprintf($text, $args);
    }

    public static function getNumber($val, $name, $t1 = null, $t2 = null, $t3 = null)
    {
        if( $t1 === null ) 
        {
            $arr = array( "а", "ы", "" );
        }
        else
        {
            $arr = array( iconv("windows-1251", "utf-8", $t1), iconv("windows-1251", "utf-8", $t2), iconv("windows-1251", "utf-8", $t3) );
        }

        $curLang = self::getcurlang();
        if( !isset(self::$dic[$curLang]) || !isset(self::$dic[$curLang][$name]) ) 
        {
            if( isset(self::$dic[Config::get("DefaultLanguage")][$name]) ) 
            {
                return self::$dic[Config::get("DefaultLanguage")][$name];
            }

            return "";
        }

        $text = self::$dic[$curLang][$name];
        if( $curLang == "ru" ) 
        {
            $text = mb_substr($text, 0, 0 - 1, "utf-8");
            $text .= _obfuscated_0D103C270E18282A5B3D2D055B1B3D3237343432292A11_($val, $arr);
        }

        return $val . " " . $text;
    }

}


